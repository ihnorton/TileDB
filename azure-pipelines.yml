trigger:
- ihn/az_ci_asan

jobs:
- job: Job
  strategy:
    matrix:
      linux:
        imageName: 'ubuntu-16.04'
        CXX: g++
        SHELLOPTS: errexit
      linux_s3:
        imageName: 'ubuntu-16.04'
        TILEDB_S3: ON
        CXX: g++
        SHELLOPTS: errexit
      linux_hdfs:
        imageName: 'ubuntu-16.04'
        TILEDB_HDFS: ON
        CXX: g++
        SHELLOPTS: errexit
      osx:
        imageName: 'macOS-10.13'
        TILEDB_S3: ON
        TILEDB_DEBUG: ON
        CXX: clang++
        SHELLOPTS: errexit
    maxParallel: 4
  pool:
    vmImage: $(imageName)
  steps:
  - template: scripts/azure-linux_mac.yml

#- job: Windows
#  pool:
#    vmImagee: 'vs2017-win2016'
#  matrix:
#  template: azure-windows.yml
